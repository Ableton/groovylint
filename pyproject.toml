[tool.pytest.ini_options]
addopts = "--import-mode=importlib -ra"
filterwarnings = ["error"]
junit_family = "legacy"

[tool.ruff]
exclude = [".direnv", ".venv"]
line-length = 90
select = ["ALL"]
ignore = [
    "ANN101",  # mypy can correctly infer "self" already
    "COM812",  # incompatible with black's formatting
    "FIX002",  # allow TODOs to be present in the code
    "TD003",   # don't require an issue link for TODOs
]

[tool.ruff.per-file-ignores]
"tests/**/*.py" = [
    "FBT001",  # allow boolean arguments (for boolean fixtures)
    "PLR0913", # allow > 5 args to functions (pytest fixtures count as args)
    "PT004",   # allow fixtures to return nothing without leading underscore
    "S101",    # allow assert statements (for pytest's way of working)
    "SLF001",  # allow tests to access private members
]
